server:
  port: 8080

spring:
  application:
    name: gateway-service

  cloud:
    gateway:
      routes:
        # Auth Service
        - id: auth-service
          uri: ${AUTH_SERVICE_URL:http://localhost:8081}
          predicates:
            - Path=/api/auth/**
          filters:
            - StripPrefix=1

        # Patient Service
        - id: patient-service
          uri: ${PATIENT_SERVICE_URL:http://localhost:8082}
          predicates:
            - Path=/api/patients/**
          filters:
            - StripPrefix=1

        # Doctor Service
        - id: doctor-service
          uri: ${DOCTOR_SERVICE_URL:http://localhost:8083}
          predicates:
            - Path=/api/doctors/**
          filters:
            - StripPrefix=1

        # Appointment Service
        - id: appointment-service
          uri: ${APPOINTMENT_SERVICE_URL:http://localhost:8084}
          predicates:
            - Path=/api/appointments/**
          filters:
            - StripPrefix=1

        # Payment Service
        - id: payment-service
          uri: ${PAYMENT_SERVICE_URL:http://localhost:8085}
          predicates:
            - Path=/api/payments/**
          filters:
            - StripPrefix=1

        # Video Service
        - id: video-service
          uri: ${VIDEO_SERVICE_URL:http://localhost:8086}
          predicates:
            - Path=/api/videos/**
          filters:
            - StripPrefix=1

        # Notification Service
        - id: notification-service
          uri: ${NOTIFICATION_SERVICE_URL:http://localhost:8087}
          predicates:
            - Path=/api/notifications/**
          filters:
            - StripPrefix=1

  graphql:
    graphiql:
      enabled: true
      path: /graphiql

# JWT Configuration
jwt:
  secret: ${JWT_SECRET:your-super-secret-jwt-key-change-this-in-production-must-be-at-least-256-bits}
  expiration: ${JWT_EXPIRATION:900000} # 15 minutes in milliseconds
  refresh-expiration: ${JWT_REFRESH_EXPIRATION:604800000} # 7 days in milliseconds

# CORS Configuration
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:3000}
  allowed-methods: ${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
  allowed-headers: ${CORS_ALLOWED_HEADERS:*}
  allow-credentials: ${CORS_ALLOW_CREDENTIALS:true}

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,gateway
  endpoint:
    health:
      show-details: always

# Logging
logging:
  level:
    com.medical: DEBUG
    org.springframework.cloud.gateway: DEBUG
